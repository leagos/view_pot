{"version":3,"sources":["webpack:///./src/assets/images/cn/pop-cn.png","webpack:///./src/views/game/index.vue?b710","webpack:///./src/components/HeadTop.vue?f6b2","webpack:///./src/views/game/index.vue","webpack:///./src/components/HeadTop.vue","webpack:///./src/components/HeadTop.vue?068a","webpack:///./src/views/game/index.vue?9fea","webpack:///./src/assets/images/back.png","webpack:///./src/assets/images/en/pop-en.png"],"names":["module","exports","class","src","alt","title","allowance","Number","NewAllowance","type","loading","openNow","openBox","$t","approve","usrPotato","allFarm","item","index","NewNUmber","key","id","local","Ids","Amounts","showBuy","left-text","headerActive","left-arrow","left","$goBack","components","props","String","default","setup","store","t","data","address","state","accounts","web3","provider","open","Headtype","toLowerCase","changeLanuage","val","initContract","initData","initWallet","initWeb3","onMenu","openUrl","url","window","location","href","closeMenu","document","addEventListener","scrollTop","documentElement","body","refData","__exports__","HeadTop","intro","get","config","RootAddress","showMask","OpenContract","UsdtContract","openUsdt","decimals","UsdtBlance","allcombo","Newcombo","eth","Contract","OpenAddress","UsdtAddress","getTokenAllowance","getopenUsdt","getAllCombo","getAllFarmType","a","methods","call","allcomboType","i","length","push","reference","methodName","methodParameters","comboCallContext","contractAddress","abi","calls","multicallCom","multicallCustomContractAddress","multicallAddress","web3Instance","tryAggregate","resultsCombo","comboArr","results","callsReturnContext","utils","hexToNumber","returnValues","hex","wResult","send","from","then","openBindUsdt","balanceOf","allFarmCalls","NumCallContext","multicallNum","resultsNumber","NumberArr","hexToNumberString","openBindBox","estimateGas","gas","gaslimit","res","events","OpenBindBoxLog","amounts","ids","catch","render"],"mappings":"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","file":"static/js/chunk-65e61982.e3f63c4f.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/img/pop-cn.17d25253.png\";","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./index.vue?vue&type=style&index=0&id=ff8c4a6c&lang=less&scoped=true\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./HeadTop.vue?vue&type=style&index=0&id=1a497c4a&lang=less&scoped=true\"","<template>\r\n  <div class=\"index-en\">\r\n    <HeadTop :title=\"title\"></HeadTop>\r\n    <div class=\"block-img\">\r\n      <img src=\"@/assets/images/Blind-box.png\" alt=\"\">\r\n    </div>\r\n    <div class=\"box-btn\">\r\n      <van-button type=\"primary\" v-if=\"allowance == 0 && !Number(NewAllowance)\" @click=\"approve\">{{$t('game.授權')}}</van-button>\r\n      <van-button v-else type=\"primary\" :loading=\"openNow\" @click=\"openBox\">{{$t('game.立即開啟')}}</van-button>\r\n    </div>\r\n    <div class=\"index-block block-info\">\r\n      <div class=\"block-head flex-between\">\r\n        <div class=\"title\">{{$t('game.我的道具')}}</div>\r\n        <div class=\"potato flex-middle\" v-if=\"usrPotato\">\r\n          <img src=\"@/assets/images/potato.png\" alt=\"\">\r\n          <div>{{$t('game.土豆幣')}}: {{usrPotato}}</div>\r\n        </div>\r\n      </div>\r\n      <div class=\"flex-wrap info-img\">\r\n        <template v-if=\"allFarm\">\r\n          <div class=\"buyinfo flex-column\" v-for=\"(item, index) in allFarm\" :key=\"index\" :class=\"{'none': !Number(NewNUmber[index])}\">\r\n            <img v-if=\"item.id == '1'\" src=\"@/assets/images/dao-black.png\" alt=\"\">\r\n            <img v-if=\"item.id == '2'\" src=\"@/assets/images/dao-red.png\" alt=\"\">\r\n            <img v-if=\"item.id == '3'\" src=\"@/assets/images/dao-yellow.png\" alt=\"\">\r\n            <img v-if=\"item.id == '4'\" src=\"@/assets/images/dao-fox.png\" alt=\"\">\r\n            <img v-if=\"item.id == '5'\" src=\"@/assets/images/dao-dog.png\" alt=\"\">\r\n            <img v-if=\"item.id == '6'\" src=\"@/assets/images/dao-bear.png\" alt=\"\">\r\n            <img v-if=\"item.id == '7'\" src=\"@/assets/images/dao-gun.png\" alt=\"\">\r\n            <img v-if=\"item.id == '8'\" src=\"@/assets/images/dao-jiu.png\" alt=\"\">\r\n            <img v-if=\"item.id == '9'\" src=\"@/assets/images/dao-how.png\" alt=\"\">\r\n            <img v-if=\"item.id == '10'\" src=\"@/assets/images/dao-tai.png\" alt=\"\">\r\n            <img v-if=\"item.id == '11'\" src=\"@/assets/images/dao-goldgun.png\" alt=\"\">\r\n            <div class=\"number\">x{{NewNUmber[index]}}</div>\r\n          </div>\r\n        </template>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div class=\"mask\" v-show=\"showBuy\">\r\n    <div class=\"buy-pop\">\r\n      <div class=\"buypop-head\">\r\n        <img v-if=\"local == 'zh-tw'\" src=\"@/assets/images/cn/pop-cn.png\" alt=\"\">\r\n        <img v-else src=\"@/assets/images/en/pop-en.png\" alt=\"\">\r\n      </div>\r\n      <div class=\"buypop-info flex-wrap\">\r\n        <div class=\"buyinfo flex-column\" v-for=\"(item, index) in Ids\" :class=\"{'none': !Number(Amounts[index])}\">\r\n          <img v-if=\"item == '1'\" src=\"@/assets/images/dao-black.png\" alt=\"\">\r\n          <img v-if=\"item == '2'\" src=\"@/assets/images/dao-red.png\" alt=\"\">\r\n          <img v-if=\"item == '3'\" src=\"@/assets/images/dao-yellow.png\" alt=\"\">\r\n          <img v-if=\"item == '4'\" src=\"@/assets/images/dao-fox.png\" alt=\"\">\r\n          <img v-if=\"item == '5'\" src=\"@/assets/images/dao-dog.png\" alt=\"\">\r\n          <img v-if=\"item == '6'\" src=\"@/assets/images/dao-bear.png\" alt=\"\">\r\n          <img v-if=\"item == '7'\" src=\"@/assets/images/dao-gun.png\" alt=\"\">\r\n          <img v-if=\"item == '8'\" src=\"@/assets/images/dao-jiu.png\" alt=\"\">\r\n          <img v-if=\"item == '9'\" src=\"@/assets/images/dao-how.png\" alt=\"\">\r\n          <img v-if=\"item == '10'\" src=\"@/assets/images/dao-tai.png\" alt=\"\">\r\n          <img v-if=\"item == '11'\" src=\"@/assets/images/dao-goldgun.png\" alt=\"\">\r\n          <div class=\"number\">x{{Amounts[index]}}</div>\r\n        </div>\r\n      </div>\r\n      <div class=\"pop-btn\" @click=\"showBuy = false\">{{$t('game.開心收下')}}</div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport { reactive, toRefs, computed, watch } from \"vue\";\r\nimport { useI18n } from \"vue-i18n\";\r\nimport {useStore} from \"vuex\";\r\nimport { getLang, setLang } from \"@/utils/i18n\"\r\nimport config from \"@/utils/config\";\r\nimport tokenAbi from \"@/utils/abi\";\r\nimport openAbi from \"@/utils/openRole\";\r\nimport { intro } from \"@/storage\";\r\nimport HeadTop from \"@/components/HeadTop.vue\";\r\nimport { MaxUint256, AddressZero } from \"@ethersproject/constants\";\r\nimport { Toast } from 'vant';\r\nimport { Multicall } from 'ethereum-multicall';\r\nexport default {\r\n  components: {\r\n    HeadTop\r\n  },\r\n  setup() {\r\n    const store = useStore()\r\n    const { t } = useI18n()\r\n    const data = reactive({\r\n      $t: t,\r\n      title: t('game.盲盒'),\r\n      address: computed(() => store.state.accounts[0]),\r\n      intro: intro.get() || config.RootAddress,\r\n      web3: computed(() => store.state.provider),\r\n      local: getLang().toLowerCase() || \"en\",\r\n      showMask: false,\r\n      showBuy: false,\r\n      openNow: false,\r\n      OpenContract: null,\r\n      UsdtContract: null,\r\n      allowance: '',\r\n      NewAllowance: '',\r\n      openUsdt: '',\r\n      decimals: '',\r\n      UsdtBlance: '',\r\n      usrPotato: 0,\r\n      Amounts: [],\r\n      Ids: [],\r\n      allFarm: [],\r\n      NewNUmber: [],\r\n      allcombo: [],\r\n      Newcombo: [],\r\n      initContract: () => {\r\n        data.OpenContract = new data.web3.eth.Contract(openAbi, config.OpenAddress)\r\n        data.UsdtContract = new data.web3.eth.Contract(tokenAbi, config.UsdtAddress)\r\n        data.initData()\r\n      },\r\n      initData: () => {\r\n        data.getTokenAllowance()\r\n        data.getopenUsdt()\r\n        data.getAllCombo()\r\n        data.getAllFarmType()\r\n      },\r\n      getAllCombo: async() => {\r\n        data.allcombo = await data.OpenContract.methods.getAllCombo().call();\r\n        let allcomboType = []\r\n        for(var i = 0; i < data.allcombo.length; i++) {\r\n          allcomboType.push({ reference: 'allcomboType', methodName: 'userComboAmount', methodParameters: [data.address, data.allcombo[i].id]});\r\n        }\r\n        const comboCallContext = [\r\n          {\r\n            reference: 'OpenContract',\r\n            contractAddress: config.OpenAddress,\r\n            abi: openAbi,\r\n            calls: allcomboType\r\n          }\r\n        ]\r\n        const multicallCom = new Multicall({ multicallCustomContractAddress: config.multicallAddress, web3Instance: data.web3, tryAggregate: false });\r\n        const resultsCombo = await multicallCom.call(comboCallContext);\r\n        let comboArr = resultsCombo.results.OpenContract.callsReturnContext\r\n        data.Newcombo = []\r\n        for(var a = 0; a < comboArr.length; a++) {\r\n          data.Newcombo.push(data.web3.utils.hexToNumber(comboArr[a].returnValues[0].hex))\r\n        }\r\n        data.usrPotato = Number(data.Newcombo[0] * 200) + Number(data.Newcombo[1] * 400) + Number(data.Newcombo[2] * 800)\r\n      },\r\n      getTokenAllowance: async () => {\r\n        let wResult = await data.UsdtContract.methods.allowance(data.address, config.OpenAddress).call();\r\n        data.NewAllowance = wResult;\r\n      },\r\n      approve: async () => {\r\n        if (!data.address) {\r\n          Toast(t('game.連線錢包'))\r\n          return\r\n        }\r\n        data.allowance = await data.UsdtContract.methods.approve(config.OpenAddress, MaxUint256).send({from: data.address}).then(() => {\r\n          Toast(t('game.授權成功'))\r\n        })\r\n        data.getTokenAllowance()\r\n      },\r\n      getopenUsdt: async() => {\r\n        data.openUsdt = await data.OpenContract.methods.openBindUsdt().call();\r\n        data.UsdtBlance = await data.UsdtContract.methods.balanceOf(data.address).call()\r\n        data.decimals = await data.UsdtContract.methods.decimals().call();\r\n      },\r\n      getAllFarmType: async() => {\r\n        data.allFarm = await data.OpenContract.methods.getAllFarmType().call();\r\n        let allFarmCalls = [];\r\n        for(var i = 1; i <= Number(data.allFarm.length); i++){\r\n          allFarmCalls.push({ reference: 'allFarmNum', methodName: 'balanceOf', methodParameters: [data.address, i]});\r\n        }\r\n        const NumCallContext = [\r\n          {\r\n            reference: 'OpenContract',\r\n            contractAddress: config.OpenAddress,\r\n            abi: openAbi,\r\n            calls: allFarmCalls\r\n          }\r\n        ]\r\n        const multicallNum = new Multicall({ multicallCustomContractAddress: config.multicallAddress, web3Instance: data.web3, tryAggregate: false });\r\n        const resultsNumber = await multicallNum.call(NumCallContext);\r\n        let NumberArr = resultsNumber.results.OpenContract.callsReturnContext\r\n        data.NewNUmber = []\r\n        for(var a = 0; a < NumberArr.length; a++) {\r\n          data.NewNUmber.push(data.web3.utils.hexToNumberString(NumberArr[a].returnValues[0].hex))\r\n        }\r\n      },\r\n      openBox: async() => {\r\n        if (!data.address) {\r\n          Toast(t('game.連線錢包'))\r\n          return\r\n        }\r\n        if(Number(data.openUsdt) > Number(data.UsdtBlance)) {\r\n          Toast(t('game.USDT餘額不足'))\r\n          return\r\n        }\r\n        data.openNow = true\r\n        let gas = await data.OpenContract.methods.openBindBox(data.intro).estimateGas({from: data.address})\r\n        let gaslimit = gas + 80000\r\n        await data.OpenContract.methods.openBindBox(data.intro).send({from: data.address, gas: gaslimit}).then((res) => {\r\n          data.openNow = false\r\n          data.Amounts = res.events.OpenBindBoxLog.returnValues.amounts\r\n          data.Ids = res.events.OpenBindBoxLog.returnValues.ids\r\n          data.showBuy = true\r\n          data.getAllFarmType()\r\n        }).catch(() => {\r\n          data.openNow = false\r\n        })\r\n      }\r\n    })\r\n    if (data.address) {\r\n      data.initContract()\r\n    }\r\n     watch(() => data.address, (val) => {\r\n      if (val) {\r\n        data.initContract()\r\n      }\r\n    })\r\n    const refData = toRefs(data);\r\n    return {\r\n      ...refData\r\n    };\r\n  }\r\n}\r\n</script>\r\n<style lang=\"less\" scoped>\r\n.index-en{\r\n  background: url('~@/assets/images/bg.jpg') center top no-repeat;\r\n  background-size: 100% auto;\r\n  background-color: #000;\r\n  width: 100%;\r\n  min-height: 100vh;\r\n  padding: 0 12px 31px;\r\n}\r\n.block-img{\r\n  max-width: 306px;\r\n  margin: 0 auto 16px;\r\n  padding-top: 36px;\r\n  img{\r\n    width: 100%;\r\n    height: auto;\r\n  }\r\n}\r\n.index-block{\r\n  margin-top: 55px;\r\n  background: #4657C2;\r\n  border-radius: 5px;\r\n  padding: 73px 8px 20px;\r\n  font-size: 22px;\r\n  color: #FFFFFF;\r\n  line-height: 29px;\r\n  word-break:break-all;\r\n  .block-info__color{\r\n    color: #FEF846;\r\n  }\r\n  .block-img{\r\n    margin: 29px 0 19px;\r\n    img{\r\n      width: 100%;\r\n    }\r\n  }\r\n  .black-btn__mask{\r\n    height: 39px;\r\n    line-height: 39px;\r\n    background: rgba(0, 0, 0, .3);\r\n    border-radius: 5px;\r\n    font-size: 21px;\r\n    color: #FFFFFF;\r\n    text-align: center;\r\n    margin-top: 15px;\r\n  }\r\n}\r\n.block-info{\r\n  position: relative;\r\n  .block-head{\r\n    position: absolute;\r\n    top: 0;\r\n    left: 0;\r\n    width: 100%;\r\n    height: 59px;\r\n    line-height: 59px;\r\n    background: #2B3DAA;\r\n    border-radius: 5px 5px 0px 0px;\r\n    text-align: center;\r\n    font-size: 18px;\r\n    color: #FFFFFF;\r\n    padding: 0 20px;\r\n    .potato{\r\n      font-size: 15px;\r\n      img{\r\n        width: 25px;\r\n        margin-right: 10px;\r\n      }\r\n    }\r\n  }\r\n  .info-img{\r\n    .buyinfo{\r\n      width: 23%;\r\n      margin: 0 3px 6px;\r\n    }\r\n    .number{\r\n      text-align: center;\r\n    }\r\n    img{\r\n      width: 100%;\r\n    }\r\n  }\r\n}\r\n.none{\r\n  display: none !important;\r\n}\r\n.box-btn{\r\n  max-width: 272px;\r\n  margin: 0 auto;\r\n}\r\n</style>\r\n","<template>\r\n  <div class=\"head\">\r\n    <van-nav-bar :title=\"title\" left-text=\"\" :class=\"{'active': headerActive}\" left-arrow>\r\n      <template #left>\r\n        <img class=\"back\" src=\"@/assets/images/back.png\" @click=\"$goBack\" alt=\"\">\r\n      </template>\r\n    </van-nav-bar>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { reactive, toRefs, computed, watch } from \"vue\";\r\nimport Footer from \"@/components/Footer\";\r\nimport { useI18n } from \"vue-i18n\";\r\nimport {useStore} from \"vuex\";\r\nimport web3Data from \"@/utils/initWeb3\";\r\nimport { getLang, setLang } from \"@/utils/i18n\";\r\nexport default {\r\n  components: {\r\n  },\r\n  props: {\r\n    title: {\r\n      type: String,\r\n      default: ''\r\n    },\r\n  },\r\n  setup(props) {\r\n    const store = useStore()\r\n    const { t } = useI18n()\r\n    const data = reactive({\r\n      $t: t,\r\n      address: computed(() => store.state.accounts[0]),\r\n      web3: computed(() => store.state.provider),\r\n      open: false,\r\n      Headtype: props.Headtype,\r\n      headerActive: 0,\r\n      title: props.title,\r\n      local: getLang().toLowerCase() || \"en\",\r\n      changeLanuage: (val) => {\r\n        setLang(val)\r\n        data.local = val\r\n      },\r\n      initContract: () => {\r\n        data.initData()\r\n      },\r\n      initData: () => {\r\n      },\r\n      initWallet: () => {\r\n        web3Data.initWeb3()\r\n      },\r\n      onMenu: () => {\r\n        data.open = !data.open\r\n      },\r\n      openUrl: (url) => {\r\n        window.location.href = url;\r\n      },\r\n      closeMenu: () => {\r\n        data.open = false\r\n      }\r\n    })\r\n    document.addEventListener('scroll', function () {\r\n      let scrollTop = document.documentElement.scrollTop || document.body.scrollTop\r\n      data.headerActive = scrollTop > 30\r\n    })\r\n    if (data.address) {\r\n      data.initContract()\r\n    }\r\n     watch(() => data.address, (val) => {\r\n      if (val) {\r\n        data.initContract()\r\n      }\r\n    })\r\n    const refData = toRefs(data);\r\n    return {\r\n      ...refData\r\n    };\r\n  }\r\n}\r\n</script>\r\n<style lang=\"less\" scoped>\r\n  .active{\r\n    background: transparent !important;\r\n  }\r\n  .back{\r\n    width: 10px !important;\r\n    height: 18px;\r\n  }\r\n</style>\r\n","import { render } from \"./HeadTop.vue?vue&type=template&id=1a497c4a&scoped=true\"\nimport script from \"./HeadTop.vue?vue&type=script&lang=js\"\nexport * from \"./HeadTop.vue?vue&type=script&lang=js\"\n\nimport \"./HeadTop.vue?vue&type=style&index=0&id=1a497c4a&lang=less&scoped=true\"\n\nimport exportComponent from \"D:\\\\contract\\\\frontend\\\\node_modules\\\\@vue\\\\cli-service\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-1a497c4a\"]])\n\nexport default __exports__","import { render } from \"./index.vue?vue&type=template&id=ff8c4a6c&scoped=true\"\nimport script from \"./index.vue?vue&type=script&lang=js\"\nexport * from \"./index.vue?vue&type=script&lang=js\"\n\nimport \"./index.vue?vue&type=style&index=0&id=ff8c4a6c&lang=less&scoped=true\"\n\nimport exportComponent from \"D:\\\\contract\\\\frontend\\\\node_modules\\\\@vue\\\\cli-service\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-ff8c4a6c\"]])\n\nexport default __exports__","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAjBAMAAABm2DcrAAAAFVBMVEUAAAD///////////////////////9Iz20EAAAABnRSTlMAl3iliAMW66iQAAAAPElEQVQY02OAATUHGIspLQUumJYGF0xLRgiaIgQDBkyQIS0tLQDKFEtLg7mfMQ3o/sEozAAXTmaAC5sCANeHKCvvjA/EAAAAAElFTkSuQmCC\"","module.exports = __webpack_public_path__ + \"static/img/pop-en.ed7a9fcf.png\";"],"sourceRoot":""}