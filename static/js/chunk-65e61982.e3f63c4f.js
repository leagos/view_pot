(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-65e61982"],{"17d6":function(e,t,n){},"22ae":function(e,t,n){e.exports=n.p+"static/img/pop-cn.17d25253.png"},43601:function(e,t,n){},"4e66":function(e,t,n){"use strict";n("43601")},6483:function(e,t,n){"use strict";n("17d6")},"88e6":function(e,t,n){"use strict";n.r(t);n("a9e3");var c=n("7a23"),a=n("6fd5"),r=n.n(a),o=n("a46c"),s=n.n(o),i=n("0f19"),l=n.n(i),b=n("e7f9"),u=n.n(b),d=n("8544"),O=n.n(d),j=n("9f89"),m=n.n(j),p=n("463a"),f=n.n(p),A=n("3a34"),h=n.n(A),g=n("584d"),w=n.n(g),k=n("20f4"),v=n.n(k),y=n("1117"),x=n.n(y),C=n("674b"),N=n.n(C),B=n("af50"),U=n.n(B),R=n("22ae"),T=n.n(R),L=n("d707"),F=n.n(L),E=Object(c["S"])("data-v-ff8c4a6c");Object(c["D"])("data-v-ff8c4a6c");var D={class:"index-en"},I=Object(c["k"])("div",{class:"block-img"},[Object(c["k"])("img",{src:r.a,alt:""})],-1),M={class:"box-btn"},Q={class:"index-block block-info"},H={class:"block-head flex-between"},P={class:"title"},S={key:0,class:"potato flex-middle"},$=Object(c["k"])("img",{src:s.a,alt:""},null,-1),V={class:"flex-wrap info-img"},_={key:0,src:l.a,alt:""},G={key:1,src:u.a,alt:""},z={key:2,src:O.a,alt:""},J={key:3,src:m.a,alt:""},K={key:4,src:f.a,alt:""},W={key:5,src:h.a,alt:""},Y={key:6,src:w.a,alt:""},X={key:7,src:v.a,alt:""},q={key:8,src:x.a,alt:""},Z={key:9,src:N.a,alt:""},ee={key:10,src:U.a,alt:""},te={class:"number"},ne={class:"mask"},ce={class:"buy-pop"},ae={class:"buypop-head"},re={key:0,src:T.a,alt:""},oe={key:1,src:F.a,alt:""},se={class:"buypop-info flex-wrap"},ie={key:0,src:l.a,alt:""},le={key:1,src:u.a,alt:""},be={key:2,src:O.a,alt:""},ue={key:3,src:m.a,alt:""},de={key:4,src:f.a,alt:""},Oe={key:5,src:h.a,alt:""},je={key:6,src:w.a,alt:""},me={key:7,src:v.a,alt:""},pe={key:8,src:x.a,alt:""},fe={key:9,src:N.a,alt:""},Ae={key:10,src:U.a,alt:""},he={class:"number"};Object(c["B"])();var ge=E((function(e,t,n,a,r,o){var s=Object(c["H"])("HeadTop"),i=Object(c["H"])("van-button");return Object(c["A"])(),Object(c["h"])(c["a"],null,[Object(c["k"])("div",D,[Object(c["k"])(s,{title:e.title},null,8,["title"]),I,Object(c["k"])("div",M,[0!=e.allowance||Number(e.NewAllowance)?(Object(c["A"])(),Object(c["h"])(i,{key:1,type:"primary",loading:e.openNow,onClick:e.openBox},{default:E((function(){return[Object(c["j"])(Object(c["L"])(e.$t("game.立即開啟")),1)]})),_:1},8,["loading","onClick"])):(Object(c["A"])(),Object(c["h"])(i,{key:0,type:"primary",onClick:e.approve},{default:E((function(){return[Object(c["j"])(Object(c["L"])(e.$t("game.授權")),1)]})),_:1},8,["onClick"]))]),Object(c["k"])("div",Q,[Object(c["k"])("div",H,[Object(c["k"])("div",P,Object(c["L"])(e.$t("game.我的道具")),1),e.usrPotato?(Object(c["A"])(),Object(c["h"])("div",S,[$,Object(c["k"])("div",null,Object(c["L"])(e.$t("game.土豆幣"))+": "+Object(c["L"])(e.usrPotato),1)])):Object(c["i"])("",!0)]),Object(c["k"])("div",V,[e.allFarm?(Object(c["A"])(!0),Object(c["h"])(c["a"],{key:0},Object(c["G"])(e.allFarm,(function(t,n){return Object(c["A"])(),Object(c["h"])("div",{class:["buyinfo flex-column",{none:!Number(e.NewNUmber[n])}],key:n},["1"==t.id?(Object(c["A"])(),Object(c["h"])("img",_)):Object(c["i"])("",!0),"2"==t.id?(Object(c["A"])(),Object(c["h"])("img",G)):Object(c["i"])("",!0),"3"==t.id?(Object(c["A"])(),Object(c["h"])("img",z)):Object(c["i"])("",!0),"4"==t.id?(Object(c["A"])(),Object(c["h"])("img",J)):Object(c["i"])("",!0),"5"==t.id?(Object(c["A"])(),Object(c["h"])("img",K)):Object(c["i"])("",!0),"6"==t.id?(Object(c["A"])(),Object(c["h"])("img",W)):Object(c["i"])("",!0),"7"==t.id?(Object(c["A"])(),Object(c["h"])("img",Y)):Object(c["i"])("",!0),"8"==t.id?(Object(c["A"])(),Object(c["h"])("img",X)):Object(c["i"])("",!0),"9"==t.id?(Object(c["A"])(),Object(c["h"])("img",q)):Object(c["i"])("",!0),"10"==t.id?(Object(c["A"])(),Object(c["h"])("img",Z)):Object(c["i"])("",!0),"11"==t.id?(Object(c["A"])(),Object(c["h"])("img",ee)):Object(c["i"])("",!0),Object(c["k"])("div",te,"x"+Object(c["L"])(e.NewNUmber[n]),1)],2)})),128)):Object(c["i"])("",!0)])])]),Object(c["R"])(Object(c["k"])("div",ne,[Object(c["k"])("div",ce,[Object(c["k"])("div",ae,["zh-tw"==e.local?(Object(c["A"])(),Object(c["h"])("img",re)):(Object(c["A"])(),Object(c["h"])("img",oe))]),Object(c["k"])("div",se,[(Object(c["A"])(!0),Object(c["h"])(c["a"],null,Object(c["G"])(e.Ids,(function(t,n){return Object(c["A"])(),Object(c["h"])("div",{class:["buyinfo flex-column",{none:!Number(e.Amounts[n])}]},["1"==t?(Object(c["A"])(),Object(c["h"])("img",ie)):Object(c["i"])("",!0),"2"==t?(Object(c["A"])(),Object(c["h"])("img",le)):Object(c["i"])("",!0),"3"==t?(Object(c["A"])(),Object(c["h"])("img",be)):Object(c["i"])("",!0),"4"==t?(Object(c["A"])(),Object(c["h"])("img",ue)):Object(c["i"])("",!0),"5"==t?(Object(c["A"])(),Object(c["h"])("img",de)):Object(c["i"])("",!0),"6"==t?(Object(c["A"])(),Object(c["h"])("img",Oe)):Object(c["i"])("",!0),"7"==t?(Object(c["A"])(),Object(c["h"])("img",je)):Object(c["i"])("",!0),"8"==t?(Object(c["A"])(),Object(c["h"])("img",me)):Object(c["i"])("",!0),"9"==t?(Object(c["A"])(),Object(c["h"])("img",pe)):Object(c["i"])("",!0),"10"==t?(Object(c["A"])(),Object(c["h"])("img",fe)):Object(c["i"])("",!0),"11"==t?(Object(c["A"])(),Object(c["h"])("img",Ae)):Object(c["i"])("",!0),Object(c["k"])("div",he,"x"+Object(c["L"])(e.Amounts[n]),1)],2)})),256))]),Object(c["k"])("div",{class:"pop-btn",onClick:t[1]||(t[1]=function(t){return e.showBuy=!1})},Object(c["L"])(e.$t("game.開心收下")),1)])],512),[[c["O"],e.showBuy]])],64)})),we=n("5530"),ke=n("1da1"),ve=(n("96cf"),n("47e2")),ye=n("5502"),xe=n("79fa"),Ce=n("01ea"),Ne=n("722f"),Be=n("992f"),Ue=n("98b3"),Re=n("ae5c"),Te=n.n(Re),Le=Object(c["S"])("data-v-1a497c4a");Object(c["D"])("data-v-1a497c4a");var Fe={class:"head"};Object(c["B"])();var Ee=Le((function(e,t,n,a,r,o){var s=Object(c["H"])("van-nav-bar");return Object(c["A"])(),Object(c["h"])("div",Fe,[Object(c["k"])(s,{title:n.title,"left-text":"",class:{active:e.headerActive},"left-arrow":""},{left:Le((function(){return[Object(c["k"])("img",{class:"back",src:Te.a,onClick:t[1]||(t[1]=function(){return e.$goBack&&e.$goBack.apply(e,arguments)}),alt:""})]})),_:1},8,["title","class"])])})),De=(n("fd2d"),n("ee10")),Ie={components:{},props:{title:{type:String,default:""}},setup:function(e){var t=Object(ye["b"])(),n=Object(ve["b"])(),a=n.t,r=Object(c["E"])({$t:a,address:Object(c["f"])((function(){return t.state.accounts[0]})),web3:Object(c["f"])((function(){return t.state.provider})),open:!1,Headtype:e.Headtype,headerActive:0,title:e.title,local:Object(xe["a"])().toLowerCase()||"en",changeLanuage:function(e){Object(xe["c"])(e),r.local=e},initContract:function(){r.initData()},initData:function(){},initWallet:function(){De["a"].initWeb3()},onMenu:function(){r.open=!r.open},openUrl:function(e){window.location.href=e},closeMenu:function(){r.open=!1}});document.addEventListener("scroll",(function(){var e=document.documentElement.scrollTop||document.body.scrollTop;r.headerActive=e>30})),r.address&&r.initContract(),Object(c["P"])((function(){return r.address}),(function(e){e&&r.initContract()}));var o=Object(c["M"])(r);return Object(we["a"])({},o)}},Me=(n("6483"),n("d959")),Qe=n.n(Me);const He=Qe()(Ie,[["render",Ee],["__scopeId","data-v-1a497c4a"]]);var Pe=He,Se=n("9d56"),$e=n("d399"),Ve=n("70a9"),_e={components:{HeadTop:Pe},setup:function(){var e=Object(ye["b"])(),t=Object(ve["b"])(),n=t.t,a=Object(c["E"])({$t:n,title:n("game.盲盒"),address:Object(c["f"])((function(){return e.state.accounts[0]})),intro:Ue["a"].get()||Ce["a"].RootAddress,web3:Object(c["f"])((function(){return e.state.provider})),local:Object(xe["a"])().toLowerCase()||"en",showMask:!1,showBuy:!1,openNow:!1,OpenContract:null,UsdtContract:null,allowance:"",NewAllowance:"",openUsdt:"",decimals:"",UsdtBlance:"",usrPotato:0,Amounts:[],Ids:[],allFarm:[],NewNUmber:[],allcombo:[],Newcombo:[],initContract:function(){a.OpenContract=new a.web3.eth.Contract(Be,Ce["a"].OpenAddress),a.UsdtContract=new a.web3.eth.Contract(Ne,Ce["a"].UsdtAddress),a.initData()},initData:function(){a.getTokenAllowance(),a.getopenUsdt(),a.getAllCombo(),a.getAllFarmType()},getAllCombo:function(){var e=Object(ke["a"])(regeneratorRuntime.mark((function e(){var t,n,c,r,o,s,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a.OpenContract.methods.getAllCombo().call();case 2:for(a.allcombo=e.sent,t=[],n=0;n<a.allcombo.length;n++)t.push({reference:"allcomboType",methodName:"userComboAmount",methodParameters:[a.address,a.allcombo[n].id]});return c=[{reference:"OpenContract",contractAddress:Ce["a"].OpenAddress,abi:Be,calls:t}],r=new Ve["a"]({multicallCustomContractAddress:Ce["a"].multicallAddress,web3Instance:a.web3,tryAggregate:!1}),e.next=9,r.call(c);case 9:for(o=e.sent,s=o.results.OpenContract.callsReturnContext,a.Newcombo=[],i=0;i<s.length;i++)a.Newcombo.push(a.web3.utils.hexToNumber(s[i].returnValues[0].hex));a.usrPotato=Number(200*a.Newcombo[0])+Number(400*a.Newcombo[1])+Number(800*a.Newcombo[2]);case 14:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),getTokenAllowance:function(){var e=Object(ke["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a.UsdtContract.methods.allowance(a.address,Ce["a"].OpenAddress).call();case 2:t=e.sent,a.NewAllowance=t;case 4:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),approve:function(){var e=Object(ke["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a.address){e.next=3;break}return Object($e["a"])(n("game.連線錢包")),e.abrupt("return");case 3:return e.next=5,a.UsdtContract.methods.approve(Ce["a"].OpenAddress,Se["b"]).send({from:a.address}).then((function(){Object($e["a"])(n("game.授權成功"))}));case 5:a.allowance=e.sent,a.getTokenAllowance();case 7:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),getopenUsdt:function(){var e=Object(ke["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a.OpenContract.methods.openBindUsdt().call();case 2:return a.openUsdt=e.sent,e.next=5,a.UsdtContract.methods.balanceOf(a.address).call();case 5:return a.UsdtBlance=e.sent,e.next=8,a.UsdtContract.methods.decimals().call();case 8:a.decimals=e.sent;case 9:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),getAllFarmType:function(){var e=Object(ke["a"])(regeneratorRuntime.mark((function e(){var t,n,c,r,o,s,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a.OpenContract.methods.getAllFarmType().call();case 2:for(a.allFarm=e.sent,t=[],n=1;n<=Number(a.allFarm.length);n++)t.push({reference:"allFarmNum",methodName:"balanceOf",methodParameters:[a.address,n]});return c=[{reference:"OpenContract",contractAddress:Ce["a"].OpenAddress,abi:Be,calls:t}],r=new Ve["a"]({multicallCustomContractAddress:Ce["a"].multicallAddress,web3Instance:a.web3,tryAggregate:!1}),e.next=9,r.call(c);case 9:for(o=e.sent,s=o.results.OpenContract.callsReturnContext,a.NewNUmber=[],i=0;i<s.length;i++)a.NewNUmber.push(a.web3.utils.hexToNumberString(s[i].returnValues[0].hex));case 13:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),openBox:function(){var e=Object(ke["a"])(regeneratorRuntime.mark((function e(){var t,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a.address){e.next=3;break}return Object($e["a"])(n("game.連線錢包")),e.abrupt("return");case 3:if(!(Number(a.openUsdt)>Number(a.UsdtBlance))){e.next=6;break}return Object($e["a"])(n("game.USDT餘額不足")),e.abrupt("return");case 6:return a.openNow=!0,e.next=9,a.OpenContract.methods.openBindBox(a.intro).estimateGas({from:a.address});case 9:return t=e.sent,c=t+8e4,e.next=13,a.OpenContract.methods.openBindBox(a.intro).send({from:a.address,gas:c}).then((function(e){a.openNow=!1,a.Amounts=e.events.OpenBindBoxLog.returnValues.amounts,a.Ids=e.events.OpenBindBoxLog.returnValues.ids,a.showBuy=!0,a.getAllFarmType()})).catch((function(){a.openNow=!1}));case 13:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()});a.address&&a.initContract(),Object(c["P"])((function(){return a.address}),(function(e){e&&a.initContract()}));var r=Object(c["M"])(a);return Object(we["a"])({},r)}};n("4e66");const Ge=Qe()(_e,[["render",ge],["__scopeId","data-v-ff8c4a6c"]]);t["default"]=Ge},ae5c:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAjBAMAAABm2DcrAAAAFVBMVEUAAAD///////////////////////9Iz20EAAAABnRSTlMAl3iliAMW66iQAAAAPElEQVQY02OAATUHGIspLQUumJYGF0xLRgiaIgQDBkyQIS0tLQDKFEtLg7mfMQ3o/sEozAAXTmaAC5sCANeHKCvvjA/EAAAAAElFTkSuQmCC"},d707:function(e,t,n){e.exports=n.p+"static/img/pop-en.ed7a9fcf.png"}}]);
//# sourceMappingURL=chunk-65e61982.e3f63c4f.js.map